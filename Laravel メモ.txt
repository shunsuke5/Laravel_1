Laravel メモ

・Laravelをインストールする前に、「Composer」をインストールする必要がある。Composerとは、php向けの依存関係管理システム。
　ライブラリ依存関係を簡単な記述で管理できるようにしたものが依存関係管理システムである。

・Composerをインストールする際に参考にしたサイトは以下。
　https://qiita.com/tsuna_kan/items/a51cfaa668ced7bacb0e

・Laravelをインストールする「composer create-project laravel/laravel Laravel_1」コマンドは、
　Laravelフォルダを作成したい場所で行う。今回はC:\Users\Owner配下でやってしまったので、ここに作成された。
　Apacheのhtdocs配下に再度インストールする。

・.envファイルとdatabase.phpファイルを編集し、無事にブラウザからLaravelを表示することができた。

・公式ドキュメントのインストールガイド内にある「Next Steps」に「Laravel Bootcamp」のリンクがあったので、
　それを読みながら進めている。最も率直らしいのでBladeの手順を進めた。
　インストールガイドは →　https://laravel.com/docs/11.x#databases-and-migrations
　Bootcampは →　https://bootcamp.laravel.com/

・php artisan serve コマンドを実行してサーバーを起動し、localhost:8000 と打ち込んで表示されるページ右上の
　「Register」からユーザーを登録した。以降ログインにはこの情報を使うはず。
　ちなみに、こういった学習用のユーザーパスワードは「ユーザー名と同じもの」とする。rootならroot、adminならadmin、
　shunsukeならshunsuke、のようにする。

・Laravelの時間が標準時子午線の時間になってしまっているので、直す。

・app\Models\配下のUser.php と Laravel_1.phpの HasMany と BelongsTo は対称的な設定。
　そのため、ユーザ側に設定したものと対するものをサーバ側のモデルに設定する必要がある？

・php.ini の date.timezone = に Asia/Tokyo を設定した。

・Laravelにおいて、全てのリクエストの入り口はpublic/index.phpファイル。

next step の Lifecycle Overview の First stepsから

=================================================================================================================================

エラーやミス、わからないことなど

・「composer create-project laravel/laravel Laravel_1」コマンドをdosで実行し、Laravelをインストールしようとしたところ、
　「Failed to download laravel/laravel from dist: The zip extension and unzip/7z commands are both missing, skipping.
　The php.ini used by your command-line PHP is: C:\php-sdk\php.ini Now trying to download from source」とエラーが出る。
　調べたところ、これはphp.iniのzip拡張を有効にすれば良いとのこと。
　参考サイト　https://qiita.com/nejimawaso/items/55512b40b724e35880c3

　しかしdosのカーソルがまだ実行中になっていたのでそのまま待っているとインストールが進み、owner配下にLaravel_1フォルダが作成された。
　しかしインストール後、「Your requirements could not be resolved to an installable set of packages」のエラーが出た。
　また、Laravel_1フォルダ配下に「vendor」フォルダがなく、恐らくエラーのせいで欠けたのだと判断した。

　インストール後に出たエラーの後にProblem1 のように表示されていたエラーメッセージとしては以下のようなものがあった。
　「require ext-fileinfo * -> it is missing from your system. Install or enable PHP's fileinfo extension.」
　「require php ^7.2 -> your php version (8.3.4) does not satisfy that requirement.」
　そのため、php.iniのfileinfoのコメントアウトを外し、Laravel_1配下の「composer.json」ファイルのphpバージョン指定に
　8.0と8.3.4を追加した。
　参考サイト　https://qiita.com/yyy752/items/20e86a6141d7062e0140

　再インストールしようとすると「Project directory "C:\Users\Owner\Laravel_1" is not empty」のエラー。
　一旦Laravel_1を削除すると次は「The openssl extension is required for SSL/TLS protection but is not available. 
　If you can not enable the openssl extension, you can disable this error, at your own risk, by setting the 'disable-tls' 
　option to true.」のエラーが出た。opensslの拡張を有効にし、再度インストールし直すとインストールが進行し、
　エラーが出ることなくインストールが完了した。Vendorフォルダも作成されていた。

・Laravelを開始し、localhost:4000で接続すると「SQLSTATE[HY000] [1049] Unknown database 'laravel'」のエラーが出た。
　.envファイルのDB_DATABASE=laravel を test に変更した。

　上記を行ってから接続すると、次は「SQLSTATE[42S02]: Base table or view not found: 1146 Table 'test.sessions' doesn't exist」
　のエラーが出た。調べると、LaravelがDBを扱う際に必要になるテーブルを保持していない、という内容のエラーとのこと。
　そのため、php artisan migrate コマンドを実行して、設定ファイルで指定しているデータベースにLaravelが扱うテーブルを
　作成しなければならない。
　参考サイト　https://kamita.net/program/?p=560

・webアプリでメッセージを送った時間がUTCになっていたので、
　「C:\Apache24\htdocs\Laravel_1\vendor\laravel\framework\src\Illuminate\Foundation\Bootstrap\LoadConfiguration.php」ファイルの
　date_default_timezone_set の UTC を UTC+9 とした。その状態でphp artisan コマンドを実行したり、Webページを表示すると
　「PHP Notice:  date_default_timezone_set(): Timezone ID 'UTC+9' is invalid in C:\Apache24\htdocs\Laravel_1\vendor\
　laravel\framework\src\Illuminate\Foundation\Bootstrap\LoadConfiguration.php on line 46」のようなエラーが出る。
　　→ 原因は.envファイルの「APP_TIMEZONE」の設定値が UTC+9 となっていることだった。ここをJSTに変更すると、
　　　次は同じエラー文でJST is invalid in ... のように表示された。ここを UTC に変更すると、エラーが無くなった。
　　　しかしなぜ.envファイルのことなのにLoadConfiguration.phpのエラーのような表示がされるのか？
　　　そして、.envをJSTにする方法は無いのだろうか？

・